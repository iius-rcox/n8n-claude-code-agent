# SecretProviderClass: GitHub App credentials from Azure Key Vault
# Feature: 005-kubernetes-deployment
# User Story: US3 - Secret Management with CSI Driver
# Purpose: Mount GitHub App credentials from Azure Key Vault via Secrets Store CSI Driver
---
apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: github-app-akv
  namespace: claude-agent
spec:
  provider: azure
  parameters:
    usePodIdentity: "false"
    useVMManagedIdentity: "false"
    clientID: "866b8e62-d9ce-42d1-a6b0-4382baf39f7a"
    keyvaultName: "iius-akv"
    tenantId: "953922e6-5370-4a01-a3d5-773a30df726b"
    objects: |
      array:
        - |
          objectName: github-app-id
          objectType: secret
          objectAlias: app-id
        - |
          objectName: github-app-private-key
          objectType: secret
          objectAlias: private-key.pem
